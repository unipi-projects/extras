# Pointers

Οι `pointers` είναι και απλοί και πολύ χρήσιμοι. Για να καταλάβει κάποιος τους `pointers` πρέπει να ξέρει τι είναι.

**Ένας `pointer` είναι μία μεταβλητή που κρατά μία διεύθυνση μνήμης**.

Μόνο αυτό χρειάζεται να καταλάβει κάποιος για να χρησιμοποιεί σωστά τους `pointers`.

## Declaring a Pointer

Η σύνταξη ενός `pointer` είναι πολύ όμοια με όλες τις δηλώσεις απλών μεταβλητών.

```c
int *pointer;
```

Η σύνταξη λοιπόν αλλάζει στο γεγονός ότι πρέπει να έχουμε τον χαρακτήρα `*` πριν από τον όνομα του pointer.

**Σημείωση**: Υπάρχουν άλλοι δύο τρόποι σύνταξης της από πάνω πρότασης.

```c
int* pointer;

int * pointer;
```

Γενικά μπορούμε να χρησιμοποιούμαι όποια θέλουμε, εγώ χρησιμοποιώ την πρώτη `int *pointer;`.

## Address of operator

Όπως είπαμε οι `pointers` το μόνο που κάνουν είναι να κρατάνε μία διεύθυνση μνήμης. Κάθε μεταβλητή που κάνουμε `declare` έχει και μία διεύθυνση μνήμης.

Για να δούμε την διεύθυνση της χρησιμοποιούμε τον *operator* `&`.

```c
int x = 5;

printf("x = %d\n", x); // printing the value of x

printf("address of x = %p\n", &x); // printing the address of x
```

Το πρώτο πράγμα που παρατηρούμε στον κώδικα είναι ότι στο δεύτερο `printf` χρησιμοποιήσαμε `%p` το οποίο δεν έχουμε ξανά δει. Στην ουσία για να εκτυπώσουμε `pointers` χρησιμοποιούμε `%p`.

Το αποτέλεσμα που θα λάβουμε είναι ένας πολύ μεγάλος δεκαεξαδικός αριθμός `0x23F12...`. Να σημειωθεί ότι κάθε φορά που τρέχουμε τον κώδικα δεν θα βγάινει η ίδια τιμή και αυτό γιατί δεν χρησιμοποιεί πάντα την ίδια διεύθυνση.

## Pointer to int

Τώρα που γνωρίζουμε πως να βρούμε την διεύθυνση μίας μεταβλητής θα την αποθηκεύσουμε σε έναν `pointer`.

```c
int x = 5;

int *p = &x;
```

Πλέον έχουμε έναν `pointer` που δείχνει σε έναν `int`, δηλαδή o `p` δείχνει στην διεύθυνση της μεταβλητής `x`.

## Dereferencing a pointer

Ας πάρουμε το από πάνω παράδειγμα και ας προσθέσουμε δύο γραμμές:

```c
int x = 5;

int *p = &x; // p now points to the address of x

printf("%p\n", p);  // print the address of x

printf("%d\n", *p);  // print the value that the address of x has stored
```

Στο πρώτο `printf` απλά εκτυπώνουμε την διεύθυνση της μεταβλητής `x` (δλδ την διεύθυνση που δείχνει ο `pointer` μας).

Στο δεύτερο `printf` εκτυπώνουμε την τιμή της μεταβλητής `x`.

Η μόνη διαφορά τους είναι ότι στο πρώτο `printf` λείπει το `*`.

Όταν λοιπόν γράφουμε `*p` κάνουμε `dereference` τον `pointer` μας και δείχνουμε την τιμή της διεύθυνση αυτής.

**Σημείωση**: Μία άλλη διαφορά στις δύο αυτές γραμμές είναι τα `%p` και `%d`. Αυτό γιατί στο πρώτο `printf` περιμένουμε να εκτυπώσουμε μία διεύθυνση ενώ στο άλλο περιμένουμε να εκτυπώσουμε έναν `int` αριθμό.

## Changing Values from Pointers

```c
int num = 10;

int *p = &num;

*p = 18; // changing the value of num to 18

printf("%d\n", num);  // printing out the new value of num
```

Επειδή έχουμε την διεύθυνση της μεταβλητής `num` σημαίνει ότι μπορούμε να της αλλάξουμε και την τιμή. Μερικές φορές είναι λίγο επικύνδηνο καθώς μπορούμε να ξεχάσουμε ότι έχουμε αυτή την δυνατότητα οπότε θα ήταν καλό να είμαστε πολύ προσεκτικοί όταν κάνουμε `dereferencing` έναν `pointer`.

Για εξάσκηση θα φτιάξουμε μία συνάρτηση η οποία θα αλλάζει τις τιμές δύο μεταβλητών με την χρήση των `pointers`.

```c
#include <stdio.h>

// prototyping functions
void swap(int *x, int *y);

int main()
{
    int player1_health = 50;
    int player2_health = 100;

    // swapping the values
    swap(&player1_health, &player2_health);

    printf("player1_health = %d\n", player1_health);
    printf("player2_health = %d\n", player2_health);
}

void swap(int *x, int *y)
{
    // creating a temp var to hold one of the variable's value
    // then I just swap the values
    int temp = *x;
    *x = *y;
    *y = temp;
}
```

Μόλις φτιάξαμε την συνάρτηση που χρησιμοποιήσαμε στον `Selection Sort`.

Στέλνουμε την διεύθυνση της κάθε μεταβλητής στην συνάρτηση `swap` όπου τις λαμβάνουν τα όρισματα που έχουμε θέσει και είναι προφανώς `pointers` καθώς για τις διευθύνσεις χρειαζόμαστε `pointers`.

[Back: Arrays](https://github.com/unipi-projects/extras/blob/main/Languages/C/Arrays/README.md)
